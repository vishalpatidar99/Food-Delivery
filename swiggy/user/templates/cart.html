{% extends 'userhome.html' %}
{% load static %}
{% block css %}
<!-- Favicon -->
    <link href="{% static 'img/logo.png' %}" rel="icon">

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;400&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"> 

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />
    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'css/style.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
{% endblock css %}
{% block menu_1 %}
<style>
    .dishesh{
        display: flex;
        justify-content: center;
        width: 100%;
        height: auto;
        padding: 7px;
    }
    .items{
        width: 600px;
        height: 150px;
        border-radius: 7px;
    }
    .dish{
        display: flex;
        justify-content: center;
        width: 30%;
        height: 100%;
        float: left;
    }
    .details{
        width: 70%;
        height: 100%;
        box-shadow: 0px 0px 5px #e4e1e1;
        background-color: #e6e6e2;
        float: right;
        display: flex;
        border-radius: 10px;
        /* justify-content: center; */
    }
    .footer2{
        height: auto;
        width: 100%;
        display: flex;
        justify-content: center;
        padding: 7px;
    }
    .checkout{
        margin-top: 25px;
        background-color: burlywood;
        width: 227px;
        height: 65px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 7px  ;
        box-shadow: 0px 0px 5px #e4e1e1;
        justify-content: space-evenly;
    }
    .cartlogo{
        /* background-color: rgb(16, 160, 36); */
        padding-bottom: 7px;
        width: 100%;
        height: 150px;
        display: flex;
        justify-content: center;
    }
    .detail_2{
        height: auto;
        width: 50%;
        display: grid;
        justify-content: right;
        align-content: space-between;
        justify-items: end;
    }
    #img{
        float: right;
        border-radius: 7px;
        margin-top: 5px;
        margin-right: 20px;
    }
    img{
        border-radius: 7px;
    }
    .quantity{
        /* background-color: aqua; */
        width: 80px;
        height: 25px;
        display: inline-flex;
        justify-content: center;
        margin-right: 20px;
    }
    .price{
        background-color: rgb(148, 144, 144);
        height: 35px;
        width: 80px;
        display: inline-flex;
        margin-bottom: 10px;
        margin-right: 20px;
        box-shadow: 0px 0px 5px #e4e1e1;
        color: wheat;
        justify-content: center;
        justify-items: center;
        align-items: center;
        border-radius: 7px;
    }
    .detail_1{
        height: auto;
        width: 50%;
    }
    .name{
        height: 50px;
        width: 300px;
        display: inline-flex;
        justify-content: space-evenly;
        justify-items: center;
        align-items: center;
    }
    .description{
        height: 50px;
        width: auto;
        margin-left: 15px;
        display: inline-flex;
        justify-content: center;
        justify-items: center;
        align-items: center;
    }
    .total{
        height: 100%;
        background-color: rgb(158, 61, 61);
        border-radius: 10px;
        color: wheat;
        width: 40%;
        display: flex;
        justify-content: center;
        justify-items: center;
        align-items: center;
    }
    .trash{
        margin-left: 20px;
        display: flex;
        justify-content: flex-start;
        align-items: flex-end;
        height: 25%;
    }
    /* #placeorder{
        text-decoration: none;
    }
    .content{
        color: gray;
    } */
    .main{
        display: flex;
        height: 100%;
        width: 100%;
    }
    .main_1{
        width: 60%;
    }
    .main_2{
        width: 30%;
        height: auto;
    }
    .item-details{
        height: auto;
        width: 100%;
        margin-top: 150px;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        flex-direction: column;
        align-content: flex-start;
        align-items: center;
        box-shadow: 0px 0px 5px #e4e1e1;
        background-color: #e6e6e2;
        border-radius: 10px;
    }
    .address{
        width: 269.69px;
        height: auto;
        /* background-color: blueviolet; */
        display: flex;
        align-items: center;
    }
    .material{
        height: auto;
        width: 100%;
    }
    .dish-material{
        height: auto;
        width: 100%;
        display: flex;
        justify-content: space-around;
    }
    .dish-name{
        float: left;
    }
    .dish-price{
        float: right;
    }
    .newaddress{
        border-radius: 7px;
        margin-bottom: 12px;
    }
    #address-btn{
        background-color:#60b246;
        height: 50px;
        width: 180px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        text-decoration: none;
        border-radius: 3px;
    }
    #adr{
        text-decoration: none;
    }
    .search-btn{
        height: 35px;
        border-radius: 7px;
    }
    #query{
        height: 35px;
        border-radius: 7px;
    }
    .payment-method{
        height: auto;
        width: 100%;
    }
    .methods{
        display: flex;
        justify-content: space-between;
    }
    #payment-method{
        padding-left: 65px;
        padding-top: 10px;
    }
</style>
<script>
    // Get the modal
    var modal = document.getElementById('id01');
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
</script>
<div class="main" style="padding-top: 10%;">
    <div class="main_1">
<div class="cartlogo">
    <img src="{% static 'img/cart.png' %}" alt="cart" height="150px"
        width="auto">
</div>
{% for item in res %}
<div class="dishesh">
    <div class="items">
        <div class="dish">
            <img src="{{item.dish.photo.url}}" alt="{{item.dish.name}}">
        </div>
        <div class="details">
            <div class="detail_1">
                <div class="name">{{item.dish.name.title}}<div class="restaurant_name">{{item.dish.restaurant.restaurant_name.title}}</div></div>
                <div class="description">{{item.dish.description}}</div>
                <div class="trash"><a href="/user/cart/?id={{item.id}}&status=del"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                    <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                  </svg></a></div>
            </div>
            <div class="detail_2">{% if item.dish.menu_type == 'veg' %}<img
                    id="img" src="{% static 'img/veg.png' %}" height="15px"
                    width="15px" alt="{{item.dish.menu_type}}">{% else %}<img
                    id="img" src="{% static 'img/non.png' %}" height="15px"
                    width="15px" alt="{{item.dish.menu_type}}">{% endif %}
                <div class="quantity"><a href="/user/cart/?id={{item.id}}&status=minus&q={{item.quantity}}"><input type="button" value="&minus;"></a>&nbsp;{{item.quantity}}&nbsp;<a href="/user/cart/?id={{item.id}}&status=plus"><input type="button" value="&plus;"></a>
                </div>
                <div class="price">&#8377;{{item.price}}</div>
            </div>
        </div>
    </div>
</div>
{% endfor %}
</div>
<div class="main_2">
    <form action="" method="post">
    <div class="item-details">
        <h2>Select Address</h2>
            {% csrf_token %}
            {% for i in user_address %}
            <div class="address">
                <input type="radio" name="address" id="{{i.id}}" value="{{i.id}}" required/>&nbsp;&nbsp;
                <label for="{{i.id}}">{{i.address}}</label>
            </div>
            {% endfor %}
            <div class="newaddress">
                <button type="button" id="address-btn" onclick="document.getElementById('id01').style.display='block'" class="w3-button w3-green">Add new address</button>
            </div>
            <div class="material">
                <div class="dish-material">
                <div class="dish-name">{% for i in res %}
                    {{i.dish.name}} {% if i.quantity > 1 %}x {{i.quantity}}{% endif %}<br/>    
                    {% endfor %}
                    <hr/>
                    Item Total <br/> 
                    <br/>
                    {% if res %}
                    Delivery fee <br/>
                    Tax and charges <br/>
                    {% endif %}
                    <hr/>
                    To pay
                </div>
                <div class="dish-price">
                    {% for i in res %}
                    &#8377;{{i.price}} <br/>
                    {% endfor %}
                    <hr/>
                    &#8377;{{total}} <br/>
                    <br/>
                    {% if res %}
                    &#8377;25 <br/>
                    &#8377;{{tax}} <br/>
                    {% endif %}
                    <hr/>
                    &#8377;{{to_pay}}      
                </div>
            </div>
            </div>
            <hr/>
            <div class="payment-method">
                <h3 id="payment-method">Chose Payment Method</h3>
                <div class="payment">
                    <div class="methods">
                        <div class="method_1">
                            <label for="upi">UPI</label>
                        </div>
                        <div class="method_2">
                            <input type="radio" name="payment" id="upi" value="UPI" required/>&nbsp;&nbsp;
                        </div>
                    </div>
                    <div class="methods">
                        <div class="method_1">
                            <label for="debit">Debit Card</label>
                        </div>
                        <div class="method_2">
                            <input type="radio" name="payment" id="debit" value="debit" required/>&nbsp;&nbsp;
                        </div>
                    </div>
                    <div class="methods">
                        <div class="method_1">
                            <label for="credit">Credit Card</label>
                        </div>
                        <div class="method_2">
                            <input type="radio" name="payment" id="credit" value="credit" required/>&nbsp;&nbsp;
                        </div>
                    </div>
                    <div class="methods">
                        <div class="method_1">
                            <label for="cod">Cash On Delivery</label>
                        </div>
                        <div class="method_2">
                            <input type="radio" name="payment" id="cod" value="COD" required/>&nbsp;&nbsp;
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <div class="footer2">
        <input type="text" name="conf" id="placeorder" value="" style="display: none;">
        {% if res %}
        <button type="submit" class="checkout" onclick="getConfirmation()" name="sub" value="{{to_pay}}">MAKE PAYMENT<div class="total">&#8377;{{to_pay}}</div></button>
        {% else %}
        <button type="button" class="checkout" onclick="getAlert()">MAKE PAYMENT<div class="total">&#8377;{{to_pay}}</div></button>
        {% endif %}
    </div> 

    </form>  
    </div>
</div>
<div id="id01" class="w3-modal" style="padding-top: 3%; z-index: 10;">
    <div class="w3-modal-content w3-card-4" style="width: 35%; height: 550px;">
      <header class="w3-container w3-teal"> 
        <span onclick="document.getElementById('id01').style.display='none'" 
        class="w3-button w3-display-topright">&times;</span>
        <!-- <h2>Modal Header</h2> -->
      </header>
      <div class="w3-container" >
        <div class="col-lg-12">
            <div class="text-center p-5" style="background: rgba(51, 33,
                29, .8); height: 550px;">
                <h1 class="text-white mb-4 mt-5">Add Address</h1>
                <form class="mb-5" action="/user/address/" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <input type="text" class="form-control border-primary p-4" name="State" maxlength="50" required="" placeholder="State" id="id_State">
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control border-primary p-4" name="city" maxlength="50" placeholder="City" required="" id="id_city">
                    </div>
                    <div class="form-group">
                        <input type="number" class="form-control border-primary p-4" name="pincode" placeholder="PIN" required="" id="id_pincode">
                    </div>
                    <div class="form-group">
                        <textarea name="address" class="form-control border-primary p-4" placeholder="Address"
                            required=""
                            id="id_address"></textarea>
                    </div>
                    <input type="hidden" name="q" value="yes">
                    <div>
                        <button class="btn btn-primary btn-block font-weight-bold py-3" type="submit">Save</button>
                    </div>
                </form>
            </div>
        </div>
       </div>
      <!-- <footer class="w3-container w3-teal">
        <p>Modal Footer</p>
      </footer> -->
    </div>
  </div>
</div>
<script>

    function getConfirmation(){
        if(confirm("Do you want to place your order")==true){
            document.getElementById('placeorder').value='Yes'
        }else{
            document.getElementById('placeorder').value='No'
        }
    }

    function getAlert(){
        alert("there is no items in cart you can't place order")
    }
</script>
{% endblock menu_1 %}
